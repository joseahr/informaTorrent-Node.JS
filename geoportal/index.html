<!DOCTYPE>
<html>
<head>
<meta charset="utf-8">
<title>Geoportal de Torrent - Página de Inicio</title>
<meta name="description" content="Tu portal de Información Geográfica">
<!-- Para dispositivos móviles -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- Bootstrap CSS -->
<link href="/stylesheets/bootstrap/css/bootstrap.css" rel="stylesheet">

<!-- Font Awesome Iconos -->
<link rel="stylesheet" href="/stylesheets/font-awesome/css/font-awesome.css">

<!-- Fuentes -->
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700,300&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Raleway:700,400,300' rel='stylesheet' type='text/css'>

<!-- CSS Principal -->
<link rel="stylesheet" href="/stylesheets/style.css">

<!-- CSS Animaciones -->
<link rel="stylesheet" href="/stylesheets/animations.css">

<!-- Highlight CSS -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/default.min.css">

<!-- Bootstrap Select CSS -->
<link rel="stylesheet" href="/javascripts/plugins/bootstrap-select/dist/css/bootstrap-select.css">

<!-- Prefix free -->
<script src="https://raw.githubusercontent.com/LeaVerou/prefixfree/gh-pages/prefixfree.min.js"></script>

<!-- Título -->
<title>Geoportal de Torrent</title>

</head>

<body class="no-trans">

	
	<!-- header start -->
	<!-- ================ --> 
	<header class="header fixed clearfix navbar navbar-fixed-top">
		<div class="container">
			<div class="row">
				<div class="col-md-4">
	
					<!-- header-left start -->
					<!-- ================ -->
					<div class="header-left clearfix">
	
						<!-- logo -->
						<div class="logo smooth-scroll">
							<a href="#banner">
								<span class="fa-stack fa-lg">
								  <i class="fa fa-circle fa-stack-2x"></i>
								  <i class="fa fa-location-arrow fa-stack-1x fa-inverse"></i>
								</span>
							</a>
						</div> 
	
						<!-- name-and-slogan -->
						<div class="site-name-and-slogan smooth-scroll">
							<div class="site-name"><a href="/">Geoportal de Torrent</a></div>
							<div class="site-slogan">Tu portal de información Geográfica</div>
						</div>
	
					</div>
					<!-- header-left end -->
	
				</div>
				<div class="col-md-8">
	
					<!-- header-right start -->
					<!-- ================ -->
					<div class="header-right clearfix">
	
						<!-- main-navigation start -->
						<!-- ================ -->
						<div class="main-navigation animated">
	
							<!-- navbar start -->
							<!-- ================ -->
							<nav class="navbar navbar-default" role="navigation">
								<div class="container-fluid">
	
									<!-- Toggle get grouped for better mobile display -->
									<div class="navbar-header">
										<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
											<span class="sr-only">Abrir Menú</span>
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
										</button>
									</div>
	
									<!-- Collect the nav links, forms, and other content for toggling -->
									<div class="collapse navbar-collapse scrollspy smooth-scroll" id="navbar-collapse-1">
										<ul class="nav navbar-nav navbar-right">
											<li class="active"><a href="#banner">Inicio</a></li>
											<li class=""><a href="#servicios">Servicios</a></li>
											<li class="dropdown">
												<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Descargas <span class="caret"></span></a>
												<ul class="dropdown-menu" style="width : 100%">
													<li><a href="#descargas">Descargas</a></li>
													<li><a href="/descargas">Visor de Descargas</a></li>
												</ul>
											</li>
											<li><a href="/visor">Visor</a></li>
											<li><a href=":8080/geonetwork">Buscador</a></li>
											<li class="dropdown">
												<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Más <span class="caret"></span></a>
												<ul class="dropdown-menu" style="width : 100%">
													<li>
														<a href="#app">Informa Torrent</a>
													</li>										
												</ul>
											</li>
										</ul>
									</div>
	
								</div>
							</nav>
							<!-- navbar end -->
	
						</div>
						<!-- main-navigation end -->
	
					</div>
					<!-- header-right end -->
	
				</div>
			</div>
		</div>
	</header>
	<!-- header end -->
	
	<!-- banner start -->
		<!-- ================ -->
		<div id="banner" class="banner" style="background: url('https://images.unsplash.com/photo-1445964047600-cdbdb873673d?ixlib=rb-0.3.5&q=80&fm=jpg&crop=entropy&w=1800&fit=max&s=e590407728cc89ef57f248ebec481dd5'); background-size: cover; background-position: center center; background-repeat: no-repeat">
			<div class="banner-image"></div>
			<div class="banner-caption">
				<div class="container">
					<div class="row">
						<div class="col-md-8 col-md-offset-2 object-non-visible" data-animation-effect="rollIn">
							<h1 class="text-center">Geoportal de <span>Torrent</span></h1>
							<p class="lead text-center">Ponemos a tu disposición todo lo referente a Información Geográfica. Servicios WMS, WFS, WCS y WMTS. Visualiza y descarga cartografía en formato SHP. Mejora Torrent registrándote y empezando a usar la app de denuncias.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- banner end -->
		
		<!-- section start -->
		<!-- ================ -->
		<div class="section clearfix object-non-visible" data-animation-effect="fadeInRightBig">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<h1 id="servicios" class="title text-center">Nuestros <span>Servicios</span></h1>
						<p class="lead text-center">Listado de nuestros servicios OGC</p>
						<div class="space"></div>
						<div class="row">
							<div class="col-md-6 text-center object-non-visible" data-animation-effect="tada">
								<i class="fa fa-cogs" style="font-size: 300px; color: #339BEB;"></i>
								<div class="space"></div>
							</div>
							<div class="col-md-6 object-non-visible" data-animation-effect="bounce">
								<p>Preguntas frecuentes</p>
								<ul class="list-unstyled">
									<li><i class="fa fa-caret-right pr-10 text-colored"></i>¿Qué es un servicio <a target="_blank" href="http://www.opengeospatial.org/standards/wms"><span>WMS</span></a>?</li>
									<li><i class="fa fa-caret-right pr-10 text-colored"></i>¿Qué es un servicio <a target="_blank" href="http://www.opengeospatial.org/standards/wfs"><span>WFS</span></a>?</li>
									<li><i class="fa fa-caret-right pr-10 text-colored"></i>¿Qué es un servicio <a target="_blank" href="http://www.opengeospatial.org/standards/wcs"><span>WCS</span></a>?</li>
									<li><i class="fa fa-caret-right pr-10 text-colored"></i>¿Qué es un servicio <a target="_blank" href="http://www.opengeospatial.org/standards/wmts"><span>WMS Teselado</span></a>?</li>
									<li><i class="fa fa-caret-right pr-10 text-colored"></i>¿Qué es un servicio <a target="_blank" href="http://www.opengeospatial.org/standards/cat"><span>CSW</span></a>?</li>
								</ul>
							</div>
						</div>
						<!-- <div class="space"></div>-->
						<h2>¿Qué te ofrecemos?</h2>
						<div class="row">
							<div class="col-md-6">
								<p>Desde el menú podrás acceder a los diferentes servicios web elaborados por el ayuntamiento de Torrent siguiendo los estándares aprobados por el <b>Open Geospatial Consortium (OGC)</b> para su uso en sistemas de información geográfica (SIG). Siguiendo estos estándares se intenta conseguir la integración y la interoperabilidad de grandes vólumenes de datos espacialmente referenciados (Información Geográfica).</p>
								<p>Si lo deseas también puedes hacer uso de nuestro <span><a href="/visor">visor online</a></span> o buscar los recursos de su interés accediendo al <a href=":8080/geonetwork">catálogo de servicios</a></span>.</p>
							</div>
							<div class="col-md-6">
								<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
									<div class="panel panel-default">
										<div class="panel-heading" role="tab" id="headingOne">
											<h4 class="panel-title">
												<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
													Servicio WMS
												</a>
											</h4>
										</div>
										<div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
											<div class="panel-body" style="text-align: center;">
												<div class="btn-group-vertical col-lg-12">
													<button id="ir" type="button" class="btn btn-default col-lg-12" service_url="/geoserver/jahr/wms?service=WMS&request=GetCapabilities&version=1.3.0">Servicio</button>
													<button id="copy" service_url="/geoserver/jahr/wms?service=WMS&request=GetCapabilities&version=1.3.0" type="button" class="btn btn-default">Copiar url</button>
													<button id="capabilities" service_url="/geoserver/jahr/wms?service=WMS&request=GetCapabilities&version=1.3.0" service_name="Servicio WMS - GetCapabilities" type="button" class="btn btn-default">Get Capabilities</button>
												</div>
												<br>
												<p>Los servicios web de mapas <b>WMS (Web Map Service)</b> producen mapas (imágenes digitales georeferenciadas) a partir de datos georeferenciados.</p>
											</div>
										</div>
									</div>
									<div class="panel panel-default">
										<div class="panel-heading" role="tab" id="headingTwo">
											<h4 class="panel-title">
												<a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
													Servicio WFS
												</a>
											</h4>
										</div>
										<div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
											<div class="panel-body" style="text-align: center;">
												<div class="btn-group-vertical col-lg-12">
													<button id="ir" type="button" class="btn btn-default col-lg-12" service_url="/geoserver/jahr/wms?service=WFS&request=GetCapabilities&version=1.3.0">Servicio</button>
													<button id="copy" service_url="/geoserver/jahr/wms?service=WFS&request=GetCapabilities&version=1.3.0" type="button" class="btn btn-default">Copiar url</button>
													<button id="capabilities" service_url="/geoserver/jahr/wms?service=WFS&request=GetCapabilities&version=1.3.0" service_name="Servicio WFS - GetCapabilities" type="button" class="btn btn-default">Get Capabilities</button>
												</div>
												<br>
												<p><b>Web Feature Service</b> o WFS del Consorcio Open Geospatial Consortium o OGC es un servicio estándar, que ofrece una interfaz de comunicación que permite interactuar con los mapas servidos por el estándar WMS, como por ejemplo, editar la imagen que nos ofrece el servicio WMS o analizar la imagen siguiendo criterios geográficos.
												Para realizar estas operaciones se utiliza el lenguaje GML que deriva del XML, que es el estándar a través del que se transmiten las órdenes WFS.

												WFS no transaccional permite hacer consultas y recuperación de elementos geográficos. Por el contrario WFS-T (Web Feature Service Transactional) permite además la creación, eliminación y actualización de estos elementos geográficos del mapa.</p>
											</div>
										</div>
									</div>
									<div class="panel panel-default">
										<div class="panel-heading" role="tab" id="headingThree">
											<h4 class="panel-title">
												<a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
													Servicio WCS
												</a>
											</h4>
										</div>
										<div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
											<div class="panel-body" style="text-align: center;">
												<div class="btn-group-vertical col-lg-12">
													<button id="ir" type="button" class="btn btn-default col-lg-12" service_url="/geoserver/jahr/wms?service=WCS&request=GetCapabilities&version=1.3.0">Servicio</button>
													<button id="copy" service_url="/geoserver/jahr/wms?service=WCS&request=GetCapabilities&version=1.3.0" type="button" class="btn btn-default">Copiar url</button>
													<button id="capabilities" service_url="/geoserver/jahr/wms?service=WCS&request=GetCapabilities&version=1.3.0" service_name="Servicio WCS - GetCapabilities" type="button" class="btn btn-default">Get Capabilities</button>
												</div>
												<p></p>
												<p>La interfaz estándar <b>Web Coverage Service</b> (WCS) o Servicio de Cobertura Web de Open Geospatial Consortium proporciona una interfaz que permite realizar peticiones de cobertura geográfica a través de la web utilizando llamadas independientes de la plataforma. Las coberturas son objetos (o imágenes) en un área geográfica mientras que la interfaz WMS o portales de mapas online como Google Maps devuelven sólo una imagen, que los usuarios no pueden editar o analizar espacialmente.</p>
											</div>
										</div>
									</div>
									
									<div class="panel panel-default">
										<div class="panel-heading" role="tab" id="headingFour">
											<h4 class="panel-title">
												<a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
													Servicio WMS Teselado
												</a>
											</h4>
										</div>
										<div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
											<div class="panel-body" style="text-align: center;">
												<div class="btn-group-vertical col-lg-12">
													<button id="ir" type="button" class="btn btn-default col-lg-12" service_url="/geoserver/gwc/service/wmts?request=GetCapabilities&service=WMTS&version=1.3.0">Servicio</button>
													<button id="copy" service_url="/geoserver/gwc/service/wmts?request=GetCapabilities&service=WMTS&version=1.3.0" type="button" class="btn btn-default">Copiar url</button>
													<button id="capabilities" service_url="/geoserver/gwc/service/wmts?request=GetCapabilities&service=WMTS&version=1.3.0" service_name="Servicio WMTS - GetCapabilities" type="button" class="btn btn-default">Get Capabilities</button>
												</div>
												<p></p>
												<p>Los Servicios Web de Mapas Teselados <b>WMTS (Web Map Tile Service)</b> es un protoc olo estándar del OGC para servir teselas de mapa pregeneradas en el servidor.</p>
											</div>
										</div>
									</div>

									<div class="panel panel-default">
										<div class="panel-heading" role="tab" id="headingFive">
											<h4 class="panel-title">
												<a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
													Servicio CSW
												</a>
											</h4>
										</div>
										<div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
											<div class="panel-body" style="text-align: center;">
												<div class="btn-group-vertical col-lg-12">
													<button id="ir" type="button" class="btn btn-default col-lg-12" service_url="/geonetwork/srv/spa/csw?request=GetCapabilities&version=2.0.2&service=CSW">Servicio</button>
													<button id="copy" service_url="/geonetwork/srv/spa/csw?request=GetCapabilities&version=2.0.2&service=CSW" type="button" class="btn btn-default">Copiar url</button>
													<button id="capabilities" service_url="/geonetwork/srv/spa/csw?request=GetCapabilities&version=2.0.2&service=CSW" service_name="Servicio CSW - GetCapabilities" type="button" class="btn btn-default">Get Capabilities</button>
												</div>
												<p></p>
												<p>Los servicios CSW o <b>Servicios de Catálogo</b> satisfacen un estándar diseñado por el Open Geospatial Consortium, el cual define una interfaz común para el descubrimiento, búsqueda y consulta de metadatos relacionados a datos, servicios y recursos de tipo geográfico.</p>
											</div>
										</div>
									</div>
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- section end -->
		
		<!-- section start -->
		<!-- ================ -->
		<div class="section clearfix object-non-visible" data-animation-effect="fadeInRightBig">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<h1 id="descargas" class="title text-center">Descarga de <span>Información Geográfica</span></h1>
						<p class="lead text-center">Servicio de descarga de cartografía digital</p>
						<div class="space"></div>
						<div class="row">
							<div class="col-md-6 text-center object-non-visible" data-animation-effect="tada">
								<i class="fa fa-download" style="font-size: 300px; color: #339BEB;"></i>
								<div class="space"></div>
							</div>
							<div class="col-md-6 object-non-visible text-center" data-animation-effect="bounce">
								<p>Selecciona alguna de las capas disponibles y el número máximo de elementos a descargar o en caso de la ortofoto el formato de imagen.</p>
								
								<div style="float:left; width: 50%;">
									<select id="capas" class="selectpicker" data-style="btn-info" data-live-search="true">
							    	    <option value="jahr:muni_torrent">Municipio</option>
						    			<option value="jahr:manzanas">Manzanas</option>
						    			<option value="jahr:viales">Viales</option>
						    			<option value="jahr:caminos">Caminos</option>
						    			<option value="jahr:portales">Portales</option>
						    			<option value="jahr:nombres_viales">Etiquetado Calles</option>
						    			<option value="jahr:denuncias_puntos">Denuncias puntual</option>
						    			<option value="jahr:denuncias_lineas">Denuncias lineal</option>
						    			<option value="jahr:denuncias_poligonos">Denuncias poligonal</option>
						    			<option value="jahr:ortofoto">Ortofoto</option>
		    						</select>
	    						</div>
	    						
	    						<div style="float:right; width: 50%;">
									<select id="features" class="selectpicker" data-style="btn-default" data-live-search="true">
							    	   	<option value="todos">Todos</option>
							    	    <option value="50">50</option>
						    			<option value="100">100</option>
						    			<option value="1000">1000</option>
						    			<option value="10000">10000</option>
						    			<option value="100000">100000</option>
						    			<option value="1000000">1000000</option>
							    	</select>
						    	</div>
						    	
	    						<div style="float:right; width: 50%;">					
							    	<select style="visibility: hidden;" id="format" class="selectpicker" data-style="btn-default" data-live-search="true">
							    	   	<option value="image/png">PNG</option>
							    	    <option value="image/gif">GIF</option>
						    			<option value="image/jpeg">JPEG</option>
						    			<option value="image/geotiff">GeoTiff</option>
						    			<option value="application/pdf">PDF</option>
							    	</select>
						    	</div>
						    	
						    	<div style="clear: both; width: 100%; padding-top: 10px;">					
						    		<buttton class="btn btn-success" id="descargar" style="width: 100%;">
						    		DESCARGAR
						    		</buttton>
						    	</div>
						    	
						    	<div style="clear: both; width: 100%; padding-top: 10px;" class="text-center">
						    		<p>También puedes seleccionar features específicas y descargarlas empleando nuestro <span><a href="descargas"> Visor de Descargas</a></span>.</p>
						    	</div>
						    	
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
		<!-- section end -->

		<!-- section start -->
		<!-- ================ -->
		<div class="section clearfix object-non-visible" data-animation-effect="fadeInRightBig">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<h1 id="app" class="title text-center">Informa <span>Torrent</span></h1>
						<p class="lead text-center">La app con la que contribuirás a la mejora de Torrent.</p>
						<div class="space"></div>
						<div class="row">
							<div class="col-md-6 text-center object-non-visible" data-animation-effect="tada">
								<i class="fa fa-bullhorn" style="font-size: 300px; color: #339BEB;"></i>
								<div class="space"></div>
							</div>
							<div class="col-md-6 object-non-visible text-center" data-animation-effect="bounce">
								<p>Una aplicación de geolocalización con la que podrás informar de denuncias, quejas y mejoras para Torrent.</p>
								<p>Accede a la aplicación pulsando <a href="/app">aquí</a></p>
						    	
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
		<!-- section end -->

<!-- Plugins Javascript situados al final de la página, así el contenido carga antes -->

<!-- JQuery y Bootstrap -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<!-- Modernizr -->
<script type="text/javascript" src="/javascripts/plugins/modernizr.js"></script>

<!-- Jquery appear -->
<script type="text/javascript" src="/javascripts/plugins/jquery.appear.js"></script>

<!-- JS Principal -->
<script type="text/javascript" src="/javascripts/template.js"></script>

<!-- FitText.js  -->
<script type="text/javascript" src="/javascripts/plugins/jquery.fittext.js"></script>

<!-- Bootstrap Dialog JS (Nakupanda)  -->
<script type="text/javascript" src="/javascripts/plugins/bootstrap-dialog.js"></script>

<!-- Highlight JS -->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>

<!-- Bootstrap Select JS -->
<script src="/javascripts/plugins/bootstrap-select/js/bootstrap-select.js"></script>

<script type="text/javascript">
console.log(window.location.href.toString().split(window.location.port)[0]);
	$('.selectpicker').selectpicker({
		width: '100%'
	}).selectpicker('mobile');
	
	$('#format').selectpicker('hide');
	
	$('#descargar').click(function(event){
		console.log('descargar');
		var capa = $('#capas').val();
		var features = ($('#features').val() == 'todos') ? '' : $('#features').val();
		console.log(capa + features);
		
		if (capa == 'jahr:ortofoto') {
			window.open(window.location.href.toString().split(window.location.port)[0] + '8001/geoserver/jahr/wms?service=WMS&version=1.1.0&request=GetMap&layers=jahr:ortofoto&styles=&bbox=703922.4219253492,4361457.771400001,721973.2836746508,4370702.237000001&width=768' +
					'&height=393&srs=EPSG:25830&format=' + $('#format').val());
		}
		else {
			if (features == '')
				window.open(window.location.href.toString().split(window.location.port)[0] + '8001/geoserver/jahr/ows?service=WFS&version=1.0.0' + 
				'&request=GetFeature&typeName=' + capa + '&outputFormat=shape-zip');
			else
				window.open(window.location.href.toString().split(window.location.port)[0] + '8001/geoserver/jahr/ows?service=WFS&version=1.0.0' + 
				'&request=GetFeature&typeName=' + capa + '&maxFeatures=' + features + '&outputFormat=shape-zip');		
		}
		
	});
	
	$('#capas').change(function(){
		console.log('change');
		if($('#capas').val() == 'jahr:ortofoto'){
			
			$('#features-format').html('FORMATO');
			$('#format').selectpicker('show');
			$('#features').selectpicker('hide');
			
		}
		else {
			
			$('#features-format').html('FEATURES');
			$('#format').selectpicker('hide');
			$('#features').selectpicker('show');
		
		}
		
	});

	// FitText
	$("h1, h2").each(function(){
		var fontSize = $(this).css('font-size');
		console.log(fontSize);
		$(this).fitText(1.1, {maxFontSize: fontSize});
	});
	
	// GetCapabilities Dialog
	$('[id="capabilities"]').click(function(event){
		var serviceURL = window.location.href.toString().split(window.location.port)[0] + '8001' + $(this).attr('service_url');
		var serviceName = $(this).attr('service_name');
		
		
		BootstrapDialog.closeAll();
		
		BootstrapDialog.show({
			type: BootstrapDialog.TYPE_INFO,
			size: BootstrapDialog.SIZE_LARGE,
			title: serviceName,
			message: '<div style="text-align: center"><i class="fa fa-spinner fa-spin fa-5x" style="color: #339BEB"></i><p>Cargando...</p></div>',
			buttons: [{
			label: 'Cerrar',
			action: function(dialog){dialog.close();}}],
			onshown: function(dialog){
				$.get(serviceURL, function(res){
					
					var div = $('<div style="max-height: 400px; overflow-y: scroll;"></div>');
					var pre = $('<pre></pre>');
					var code = $('<code id="service_content" class="xml"></code>').text(
							new XMLSerializer().serializeToString(res)
					);
										
					pre.append(code);
					div.append(pre);
					
					$(dialog.getModalBody()).empty();
					$(dialog.getModalBody()).append(div);
					console.log('recibido');
					
					hljs.highlightBlock($(dialog.getModalBody().get(0)).find('code').get(0));
					
				})
				.fail(function(){
					BootstrapDialog.closeAll();
					
					new BootstrapDialog.show({
						title: 'ERROR',
						message: 'Error obteniendo documento de capacidades',
						type: BootstrapDialog.TYPE_DANGER,
						buttons: [{label: 'Cerrar',
								   action: function(dialog){dialog.close();}}
						],
						onshow: function(dialog){ $(dialog.getModalHeader()).css('background', 'rgb(200,50,50)')}
					});
				});
			}
		});  
	});
	
	// Copy Service URL
	$('[id="copy"]').click(function(event){
		var service_url = window.location.href.toString().split(window.location.port)[0] + '8001' + $(this).attr('service_url');
	    var $temp = $("<input>")
	    $("body").append($temp);
	    $temp.val(service_url).select();
	    document.execCommand("copy");
	    $temp.remove();
	    alert('copiado');
	});
	
	// Go to Service
	$('[id="ir"]').click(function(event){
		window.open(window.location.href.toString().split(window.location.port)[0] + '8001' +  $(this).attr('service_url'));
	});
	
</script>

</body>

</html>
